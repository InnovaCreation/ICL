<!DOCTYPE html>
<html>
	<head>
		<title>ICLauncher</title>

		<link rel="stylesheet" href="lib/uikit/css/uikit.min.css">

		<script src="lib/jquery.min.js"></script>

		<script src="lib/uikit/js/uikit.min.js"></script>
		<script src="lib/uikit/js/uikit-icons.min.js"></script>

		<script src="initialize.js"></script>
		<script src="lib/Profile.js"></script>
		<script src="lib/Launcher.js"></script>
		<script src="lib/MinecraftVersionsJSON.js"></script>

	</head>
	<body>
		<nav class="uk-navbar-container uk-margin" uk-navbar>
			<div class="uk-navbar-left">
				<a class="uk-navbar-item uk-logo" href="#"><strong>ICL</strong> version <sm id="icl_ver"></sm></a>
				<script>
					document.getElementById("icl_ver").textContent = $ICL_Version;
				</script>
			</div>
		</nav>

		<div uk-grid>

			<div class="uk-grid-divider" uk-grid>
				<div class="uk-width-expand@s">
					<div>
						<h2>Game Profile</h2>

						<div><a>Profile Name</a><input id="profile_name"></input></div>
						<div><a>Path/to/java</a><input id="java_path"></input></div>
						<div><a>Custom JVM args</a><input id="custom_jvm_args"></input></div>
						<div><a>Minecraft Version String</a><input id="mc_version_string"></input></div>
						<div><a>Custom Minecraft Args</a><input id="custom_minecraft_args"></input></div>
						<div><a>Minecraft Args Model</a><input id="minecraft_arguments_model"></input></div>
						<div><a>Native Path</a><input id="native_path"></input></div>
						<div><a>Asset Index</a><input id="asset_index"></input></div>
						<div><a>Window Height</a><input id="height"></input></div>
						<div><a>Window Width</a><input id="width"></input></div>


						<button id="apply_profle" class="uk-button uk-button-default">Apply Game Profile</button>
						<button id="profile2args" class="uk-button uk-button-default">Generate Args</button>
						<button id="p2json" class="uk-button uk-button-default">Store Profile</button>
						<button id="json2p" class="uk-button uk-button-default">Load Profile</button>

						<script>
							var $p = new Profile();

							function refresh_profile_blob() {
								document.getElementById('profile_name').value = $p.profile_name;
								document.getElementById('java_path').value = $p.java_path;
								document.getElementById('custom_jvm_args').value = $p.custom_jvm_args;
								document.getElementById('mc_version_string').value = $p.mc_version_string;
								document.getElementById('custom_minecraft_args').value = $p.custom_minecraft_args;
								document.getElementById('native_path').value = $p.native_path;

								document.getElementById('asset_index').value = $p.asset_index;

								document.getElementById('height').value = $p.height;
								document.getElementById('width').value = $p.width;

								document.getElementById('apply_profle').onclick = apply_profile_blob;
							}

							refresh_profile_blob();

							function apply_profile_blob() {
								$p.profile_name = document.getElementById('profile_name').value;
								$p.java_path = document.getElementById('java_path').value;
								$p.custom_jvm_args = document.getElementById('custom_jvm_args').value;
								$p.mc_version_string = document.getElementById('mc_version_string').value;
								$p.custom_minecraft_args = document.getElementById('custom_minecraft_args').value;
								$p.native_path = document.getElementById('native_path').value;

								$p.asset_index = document.getElementById('asset_index').value;

								$p.height = document.getElementById('height').value;
								$p.width = document.getElementById('width').value;
							}

							document.getElementById('profile2args').onclick = function() {
								document.getElementById('java_path').value = $p.java_path;
								document.getElementById('jvm_args').value = $p.GenerateJVMArgs($gp);

								document.getElementById('minecraftArguments').value = $p.GenerateMinecraftArguments($gp);
							};

							document.getElementById('p2json').onclick = function() {
								$p.StoreJSON();
							};

							document.getElementById('json2p').onclick = function() {
								$p.LoadFromJSON(document.getElementById('profile_name').value);
								refresh_profile_blob();
							};
						</script>
					</div>

					<div>
						<h2>Directly control all the launch arguments</h2>
						<div><a>JVM args</a><input id="jvm_args"></input></div>
						<div><a>Class Path</a><input id="class_path"></input></div>
						<div><a>Main Class</a><input id="mainClass"></input></div>
						<div><a>Minecraft Arguments</a><input id="minecraftArguments"></input></div>

						<button id="launch_button" class="uk-button uk-button-default">Launch!</button>

						<div>
							<pre class="uk-resize">
								<code id="game_output">
									Game Output
								</code>
							</pre>
						</div>

						<script>
							document.getElementById('launch_button').onclick =
							function(){ LaunchGame(AssemblyLaunchCMD(
								document.getElementById('java_path').value,
								document.getElementById('jvm_args').value,
								document.getElementById('class_path').value,
								document.getElementById('mainClass').value,
								document.getElementById('minecraftArguments').value
								)); };
						</script>
					</div>

					<div>
						<h2>Load arguments from Minecraft's json</h2>
						<div><a>path/to/json</a><input id="json_file_path"></input></div>
						<button id="launch_button" onclick="LoadMinecraftArgsFromJSON(document.getElementById('json_file_path').value)" class="uk-button uk-button-default">Load</button>
					</div>
				</div>

				<div class="uk-width-1-4@s">
					<div>

						<h2>Global Profile</h2>
						<div><a>Player ID</a><input id="player_id"></input></div>
						<div><a>Max Memory</a><input id="maxMemory" type="number"></input></div>
						<div><a>Min Memory</a><input id="minMemory" type="number"></input></div>

						<button id="apply_gp" class="uk-button uk-button-default">Apply Global Profile</button>
						<button id="store_gp" class="uk-button uk-button-default">Save Global Profile</button>
						<button id="load_gp" class="uk-button uk-button-default">Load Global Profile</button>

						<script>
							var $gp = new GlobalProfile();
							document.getElementById('maxMemory').value = $gp.maxMemory;
							document.getElementById('minMemory').value = $gp.minMemory;

							document.getElementById('apply_gp').onclick = function(){
								$gp.player_id = document.getElementById('player_id').value;
								$gp.maxMemory = Math.floor(document.getElementById('maxMemory').value);
								$gp.minMemory = Math.floor(document.getElementById('minMemory').value);
							};

							document.getElementById('store_gp').onclick = function() {
								$gp.StoreJSON();
							};

							document.getElementById('load_gp').onclick = function() {
								$gp.LoadFromJSON();
								document.getElementById('player_id').value = $gp.player_id;
								document.getElementById('maxMemory').value = $gp.maxMemory;
								document.getElementById('minMemory').value = $gp.minMemory;
							};
						</script>
					</div>
				</div>
			</div>

		</div>

	</body>
</html>
